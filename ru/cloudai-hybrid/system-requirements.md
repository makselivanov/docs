# Требования к инфраструктуре для работы {{ cloudml-full-name }}

Чтобы развернуть {{ cloudml-full-name }}, необходимо подготовить инфраструктуру. Потребуется кластер {{ k8s }} с поддержкой GPU, развернутые базы данные {{ RD }} или {{ PG }}, а также объектное хранилище, совместимое с AWS API или {{ objstorage-full-name }} API. 

| Компонент инфраструктуры | Назначение | Целевой компонент {{ cloudml-name }} |
|---|---|---|
| {{ RD }} | Ограничение частоты обращений и кеширование |	Public API Services |
| {{ PG }} | Хранение метаданных сервисов | Model Service, Queue Agent, Tuning Service, Dataset Service |
| Объектное хранилище S3 | Хранение данных моделей. API объектного хранилища должен быть совместим с {{ objstorage-full-name }} API | Model Service, Queue Agent, Tuning Service, Dataset Service |
| (Опционально) {{ KF }} |	Работа с очередями. По умолчанию данные записываются агентом очередей в {{ PG }} и асинхронно обрабатываются компонентами Inference | Inference Backend |
| (Опционально) {{ OS }} | Хранение контекстных данных | RAG (в поставку не входит) |
| {{ k8s }} | Инфраструктурный слой работы {{ cloudml-name }} | |

Для всех баз данных необходим режим кластеризации. Для {{ RD }} и {{ PG }} предпочтителен режим физической репликации с возможностью читать данные из реплики. Для {{ KF }} и {{ OS }} необходимы стандартные для этих баз режимы кластеризации и кворума.

Кластер {{ k8s }} должен поддерживать Persistent volume claim с объектным хранилищем (S3 Storage). То есть требуется [драйвер CSI](https://github.com/yandex-cloud/k8s-csi-s3) (Container Storage Interface) для доступа к S3 API. Узлы группы {{ k8s }} должны иметь GPU и набор LTS-драйверов NVIDIA®.

