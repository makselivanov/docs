{% include [include](../../_includes/cli-install.md) %}

{% include [default-catalogue](../../_includes/default-catalogue.md) %}

1. Посмотрите описание команды CLI для создания сервисного подключения:

    ```bash
    yc vpc private-endpoint create --help
    ```

1. Создайте сервисное подключение к {{ objstorage-short-name }} в каталоге по умолчанию:

    ```bash
    yc vpc private-endpoint create \
      --name s3-vpc-link \
      --description "Private Endpoint to the Object Storage" \
      --network-name default-net \
      --object-storage 
    ```

    Где:

    * `--name` — (опционально) имя сервисного подключения.
    * `--description` — (опционально) описание сервисного подключения.
    * `--network-name` — имя [облачной сети](../../vpc/concepts/network.md#network), в которой будет создано сервисное подключение. Также вы можете использовать [идентификатор сети](../../vpc/operations/network-get-info.md) в параметре `--network-id`.
    * `--object-storage` — сервисное подключение к {{ objstorage-short-name }}. Другие типы сервисных подключений пока не доступны.

    При создании сервисного подключения можно использовать дополнительные параметры:

    * `--address-spec` — (опционально) параметры в формате `ключ=значение` для внутреннего IP-адреса, который будет назначен сервисному подключению:
      * `address` — (опционально) внутренний IP-адрес для сервисного подключения. Если IP-адрес не указан, он будет назначен случайно из диапазона указанной подсети.
      * `subnet-id` — (опционально) [идентификатор подсети](../../vpc/operations/subnet-get-info.md), из которой будет взят IP-адрес для сервисного подключения. Если подсеть не указана, внутренний IP-адрес будет назначен случайно из диапазона одной из подсетей облачной сети.

        {% note info %}

        Чтобы создать сервисное подключение, в вашей сети должна быть хотя бы одна подсеть.

        {% endnote %}

    * `--private-dns-records-enabled` — (опционально) параметр для создания дополнительных [ресурсных записей](../../dns/concepts/resource-record.md) в DNS для переопределения публичного FQDN сервиса, к которому создается подключение.

      В зависимости от того, применен ли параметр, будут автоматически созданы следующие ресурсные записи для доступа в {{ objstorage-name }}:
      * параметр _не используется_:

        Имя | Тип | Значение
        --- | --- | ---
        storage.pe.yandexcloud.net | A | <внутренний_IP-адрес_сервисного_подключения>
        *.storage.pe.yandexcloud.net | A | <внутренний_IP-адрес_сервисного_подключения>

      * параметр _используется_:

        Имя | Тип | Значение
        --- | --- | ---
        storage.pe.yandexcloud.net | A | <внутренний_IP-адрес_сервисного_подключения>
        *.storage.pe.yandexcloud.net | A | <внутренний_IP-адрес_сервисного_подключения>
        {{ s3-storage-host }} | A | <внутренний_IP-адрес_сервисного_подключения>
        *.{{ s3-storage-host }} | A | <внутренний_IP-адрес_сервисного_подключения>

1. Проверьте, что сервисное подключение создалось:

    ```bash
    yc vpc private-endpoint list
    ```
    
    Результат выполнения команды:

    ```text
    +----------------------+-------------+--------------------------------+
    |          ID          |    NAME     |          DESCRIPTION           |
    +----------------------+-------------+--------------------------------+
    | enpd7rq************* | s3-vpc-link | Private Endpoint to the Object |
    |                      |             | Storage                        |
    +----------------------+-------------+--------------------------------+
    ```

О том, как узнать параметры созданного сервисного подключения, см. в разделе [{#T}](../../vpc/operations/private-endpoint-get-info.md).