# Как создавать виртуальные машины с несколькими сетевыми интерфейсами


## Описание задачи {#case-description}

Необходимо создать виртуальную машину с несколькими сетевыми интерфейсами.

## Решение {#case-resolution}

Чтобы создать ВМ с несколькими сетевыми интерфейсами, воспользуйтесь образами из [категории **Сетевая инфраструктура**](https://yandex.cloud/ru/marketplace?categories=network) в {{ marketplace-full-name }}. Образы из этой категории позволяют создавать ВМ с несколькими интерфейсами, которые могут быть связаны с разными облачными сетями.

{% note warning %}

Количество сетевых интерфейсов можно задать только в процессе создания виртуальной машины. После того как виртуальная машина уже создана, добавить новые сетевые интерфейсы или удалить имеющиеся не получится.

Если вам требуется изменить количество сетевых интерфейсов на уже созданной виртуальной машине – воспользуйтесь функциональностью [снимков](../../../compute/operations/vm-create/create-from-snapshots.md) или [образов дисков](../../../compute/operations/vm-create/create-from-user-image.md) для создания копии ВМ и задайте необходимое количество сетевых интерфейсов в процессе создания ВМ.

{% endnote %}

В качестве одного из вариантов вы можете использовать [образ NAT-инстанса](https://yandex.cloud/ru/marketplace/products/yc/nat-instance-ubuntu-18-04-lts), созданного на основе LTS-выпуска Ubuntu Linux. В [соответствующем разделе документации](../../../tutorials/routing/nat-instance/index.md) описан сценарий, позволяющий настроить маршрутизацию трафика в интернет с использованием ВМ на базе этого образа.

Если вы знакомы с решениями от Cisco или Mikrotik, вы можете использовать их в качестве виртуальных маршрутизаторов: образы этих продуктов также доступны в {{ marketplace-full-name }}, однако для их использования требуется заранее приобретенная лицензия. Подробнее об этих продуктах мы рассказываем здесь:

* [Установка виртуального роутера Cisco CSR 1000v](../../../vpc/tutorials/cisco.md);
* [Установка виртуального роутера Mikrotik CHR](../../../vpc/tutorials/mikrotik.md).

Максимальное количество сетевых интерфейсов зависит от платформы и количества vCPU у виртуальной машины. 
Актуальные лимиты количества сетевых интерфейсов для используемых в {{ yandex-cloud }} аппаратных платформ:

1. Broadwell (`standard-v1`):

   * от 2 до 16 vCPU — 8 интерфейсов;
   * от 20 до 32 vCPU — 16 интерфейсов.

1. Cascade Lake (`standard-v2`):

   * от 2 до 16 vCPU — 8 интерфейсов;
   * от 20 до 80 vCPU — 16 интерфейсов.

1. Ice Lake (`standard-v3`):

   * от 2 до 32 vCPU — 8 интерфейсов;
   * от 36 до 96 vCPU — 16 интерфейсов.

Обратите внимание, что на старте к ВМ может быть подключено не более 14 устройств, включая загрузочный диск и сетевую карту. Виртуальная машина, к которой подключено более 14 устройств, не запустится, поэтому при ее создании нужно учесть это ограничение. Остальные устройства требуется подключать к уже запущенной ВМ при необходимости. 

Подробнее пишем в [документации](../../../compute/concepts/limits.md#compute-limits-vm).

{% note alert %}

Если вы перезапустите ВМ, к которой подключено более 14 устройств, то она не сможет загрузиться.

{% endnote %}