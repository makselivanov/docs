---
title: "Общий порядок составной (multipart) загрузки объектов в бакет {{ objstorage-full-name }}"
description: "Из статьи вы узнаете, какие шаги нужно предпринять для выполнения составной (multipart) загрузки объектов в бакет."
---

# Общий порядок составной (multipart) загрузки

Составная загрузка позволяет сохранять объекты в {{ objstorage-name }} по частям. Это может пригодиться при загрузке или копировании больших объектов. Рекомендуем использовать составную загрузку для объектов от 100 МБ.

Информацию о максимальном размере объекта для загрузки смотрите в разделе [{#T}](../../concepts/limits.md).

Составная загрузка состоит из следующих шагов:
1. Инициализация загрузки.
    Пользователь отправляет [запрос на начало составной загрузки](multipart/startupload.md), а {{ objstorage-name }} возвращает идентификатор, который следует использовать для всех последующих операций с загрузкой.
    Пользовательские метаданные объекта следует передавать на этом этапе загрузки.
1. Загрузка объекта по частям.
    Каждая часть объекта отправляется [отдельным запросом](multipart/uploadpart.md) и должна иметь порядковый номер, который используется для сборки объекта на стороне {{ objstorage-name }}. Если {{ objstorage-name }} получит две части объекта с одинаковыми номерами, то сохранит последнюю пришедшую.
    Для каждой загруженной части {{ objstorage-name }} возвращает заголовок `ETag` в ответе. Пользователь должен сохранить номера и соответствующие им `ETag` для всех загруженных частей. Это необходимо для операции завершения загрузки.
    В процессе загрузки можно получить от {{ objstorage-name }} [список уже загруженных частей объекта](multipart/listparts.md).
1. Завершение загрузки.
    При получении [запроса на завершение загрузки](multipart/completeupload.md) {{ objstorage-name }} собирает все загруженные части в единый объект и присоединяет к объекту метаданные, которые были переданы при инициализации загрузки.

    {% note info %}

    Пока загрузка не завершена, части объекта сохраняются по отдельности и занимают место, при этом их нельзя получить из {{ objstorage-name }}. Незавершенные загрузки учитываются при расчете занятого места.

    {% endnote %}

    Помимо запроса на завершение загрузки пользователь может отправить [запрос о прерывании загрузки](multipart/abortupload.md). В этом случае {{ objstorage-name }} удалит все полученные части объекта для заданной загрузки и удалит саму загрузку.
    После завершения или прерывания загрузки пользователь не сможет более использовать идентификатор загрузки в запросах.

Пользователь может одновременно запустить несколько составных загрузок.

Можно [получить список незавершенных загрузок](multipart/listuploads.md).

Методы составной загрузки:

Метод|Описание
-----|--------
[startUpload](multipart/startupload.md) | Инициализирует составную загрузку.
[uploadPart](multipart/uploadpart.md) | Загружает часть объекта.
[copyPart](multipart/copypart.md) | Копирует часть объекта.
[listParts](multipart/listparts.md) | Выдает список загруженных частей.
[abortUpload](multipart/abortupload.md) | Прерывает составную загрузку.
[completeUpload](multipart/completeupload.md) | Завершает составную загрузку.
[listUploads](multipart/listuploads.md) | Выдает список незавершенных загрузок.

{% include [the-s3-api-see-also-include](../../../_includes/storage/the-s3-api-see-also-include.md) %}