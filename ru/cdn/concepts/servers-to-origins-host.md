---
title: "Заголовок Host в запросах CDN-серверов к источникам в {{ cdn-full-name }}"
description: "Из статьи вы узнаете, для чего нужен заголовок Host в запросах CDN-серверов к источникам, а также как правильно его настроить."
---

# Заголовок Host в запросах CDN-серверов к источникам

Чтобы CDN-серверы отправляли корректные запросы к [источникам](origins.md), настройте значение HTTP-заголовка `Host` для этих запросов:

* **{{ ui-key.yacloud.cdn.value_host-header-default }}** — первое [доменное имя для раздачи контента](resource.md#hostnames), указанное в настройках CDN-ресурса.
* **{{ ui-key.yacloud.cdn.value_host-header-custom }}** — произвольное доменное имя.
* **{{ ui-key.yacloud.cdn.value_protocol-match }}** — такое же значение, как и у заголовка `Host` в запросе клиента к CDN.

Значение заголовка `Host` выбирается при создании ресурса. После этого настройку можно изменить вместе с другими основными настройками ресурса. Подробнее см. в инструкциях:

* [{#T}](../operations/resources/create-resource.md)
* [{#T}](../operations/resources/configure-basics.md)

## Как правильно настроить заголовок {#best-practices}

Выбор правильной настройки для заголовка `Host` зависит от того, какие источники вы используете в ресурсе:

{% list tabs %}

- Один источник

  Если источник — бакет, выберите вариант `{{ ui-key.yacloud.cdn.value_host-header-custom }}` и укажите значение `<имя_бакета>.{{ s3-storage-host }}` (или `<имя_бакета>.{{ s3-web-host }}`, если бакет настроен для [хостинга статического сайта](../../storage/concepts/hosting.md)).

  В остальных случаях настройка зависит от того, какие запросы принимает источник.

  > Например, в [сценарии сине-зеленого и канареечного развертывания](../tutorials/blue-green-canary-deployment.md) L7-балансировщик настроен так, чтобы принимать запросы с двумя значениями заголовка `Host`. Для CDN-ресурса выбран вариант `{{ ui-key.yacloud.cdn.value_protocol-match }}`.

  Чтобы проверить, что источник корректно принимает запросы с выбранным значением заголовка `Host`, выполните следующую команду:

  ```bash
  curl \
    --head \
    --insecure \
    --header "Host: <значение_заголовка>" <адрес_сервера_или_L7-балансировщика>
  ```

- Группа источников

  Если в группе есть один бакет:

  1. Выберите вариант `{{ ui-key.yacloud.cdn.value_host-header-custom }}` и укажите значение `<имя_бакета>.{{ s3-storage-host }}` (или `<имя_бакета>.{{ s3-web-host }}`, если бакет настроен для [хостинга статического сайта](../../storage/concepts/hosting.md)).
  1. Настройте остальные источники (серверы и L7-балансировщики) так, чтобы они принимали запросы с указанным значением заголовка.

  Если в группе больше одного бакета, рекомендуем использовать вместо них L7-балансировщик с бакетами в виде бэкендов (см. пример настройки в [сценарии сине-зеленого и канареечного развертывания](../tutorials/blue-green-canary-deployment.md)).

  В остальных случаях настройка зависит от того, какие запросы принимаются источниками. Чтобы проверить, что источник корректно принимает запросы с выбранным значением заголовка `Host`, выполните следующую команду:

  ```bash
  curl \
    --head \
    --insecure \
    --header "Host: <значение_заголовка>" <адрес_сервера_или_L7-балансировщика>
  ```

{% endlist %}
