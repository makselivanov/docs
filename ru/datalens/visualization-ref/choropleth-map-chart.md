# Фоновая карта ![](../../_assets/datalens/heatmap.svg)

Фоновая карта отображает целые области и регионы разными цветами или оттенками цвета. Области на карте задаются с помощью геополигонов. Геополигон — это элемент, который состоит из области, ограниченной замкнутой линией, и самой этой линии. Значение показателя выражается через насыщенность цвета или через сам оттенок.

Чтобы показать полигоны на карте, добавьте в датасет поле с типом данных [Геополигон](../dataset/data-types.md#geopolygon):

* Создайте текстовое поле, в котором лежат данные вида `[[[55.60807, 37.5698], [55.60847, 37.56992], [55.60851, 37.57095]]]` — координаты точек полигона в квадратных скобках. Вы можете предварительно подготовить данные в БД и определить тип данных [Геополигон](../dataset/data-types.md#geopolygon) в интерфейсе описания датасета.
* Используйте [функцию](../function-ref/GEOPOLYGON.md) `GEOPOLYGON(polygon_string)`, чтобы создать вычисляемое поле с типом данных [Геополигон](../dataset/data-types.md#geopolygon).
* Если у вас в данных есть поле с названием городов, регионов или стран, используйте [справочник геоточек/геополигонов](https://geointellect.com/files/geo_for_datalens.zip) нашего партнера Геоинтеллект.

По [ссылке](https://storage.yandexcloud.net/doc-files/Regions.csv) можно скачать пример CSV-файла с полигонами регионов РФ.

​Фоновая карта используется, когда нужно оценить значение показателя в рамках территориальной единицы. Например, с помощью фоновой карты можно показать плотность населения отдельных районов.

![choropleth-map](../../_assets/datalens/visualization-ref/choropleth-map/choropleth-map.png)


## Секции в визарде {#wizard-sections}

Секция<br/> в визарде| Описание
----- | ----
Полигоны (Геополигоны) | Измерение с типом [Геополигон](../dataset/data-types.md#geopolygon).
Цвета | Измерение или показатель. Влияет на цвет или интенсивность закрашивания областей.
Тултипы | Измерение или показатель. Подсказка, которая отобразится при наведении на область. Для полей с типом `Строка` можно настроить использование базового синтаксиса [{#T}](../dashboard/markdown.md): нажмите на значок перед названием поля и включите опцию **Markdown**.
Фильтры слоя | Измерение или показатель. Используется в качестве фильтра текущего слоя.
Фильтры | Измерение или показатель. Используется в качестве фильтра всего чарта.

## Создание фоновой карты {#create-diagram}


{% include [datalens-workbooks-collections-note](../../_includes/datalens/operations/datalens-workbooks-collections-note-step4.md) %}


1. Перейдите на [главную страницу]({{ link-datalens-main }}) {{ datalens-short-name }}.
1. На панели слева выберите ![chart](../../_assets/console-icons/chart-column.svg) **Чарты**.
1. Нажмите кнопку **Создать чарт** → **Чарт**.
1. Слева вверху нажмите ![image](../../_assets/console-icons/circles-intersection.svg) **Выберите датасет** и укажите датасет для визуализации. Если у вас нет датасета, [создайте его](../dataset/create-dataset.md#create).
1. Выберите тип чарта **Карта**.
1. Выберите тип слоя **Полигоны (Геополигоны)**.
1. Перетащите измерение с типом [Геополигон](../dataset/data-types.md#geopolygon) из датасета в секцию с выбором типа слоя.
1. Закрасьте полигоны на карте. Перенесите показатель или измерение в секцию **Цвета**.
1. Добавьте тултипы из значений измерения и показателя, которые отображаются при наведении на полигон.

Дополнительно вы можете:

* добавить, переименовать, удалить слой;
* применить фильтр ко всему чарту или к одному слою.

## Рекомендации {#recomendations}

* Не используйте фоновую карту, если хотите провести точное сравнение значений между собой.
* Для повышения точности нужно наносить подписи данных или добавлять к карте всплывающие подсказки с информацией.
